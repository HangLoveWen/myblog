---
title: 事件绑定
date: 2023-1-6
---
1.什么是事件
  事件是渲染层到逻辑层的通讯方式。通过事件可以将用户在渲染层产生的行为，反馈到逻辑层进行业务的处理。
![878f299cadd417adf3f490b6642742ee.png](https://s1.imagehub.cc/images/2023/01/06/878f299cadd417adf3f490b6642742ee.png)
2.小程序中常用的事件
![8ef02b6397fdb57f7b253751b4e8c402.png](https://s1.imagehub.cc/images/2023/01/06/8ef02b6397fdb57f7b253751b4e8c402.png)
3.事件对象的属性列表
  当事件回调触发的时候，会受到一个事件对象event，它的详细属性如下表所示：
![41d7f68b4e611c719452a8be25dcda9d.png](https://s1.imagehub.cc/images/2023/01/06/41d7f68b4e611c719452a8be25dcda9d.png)
4.target和currentTarget的区别
  target是触发该事件的源头组件，而currentTarget则是当前事件所绑定的组件。举例如下
![31379a32db8f74ccad5630240db68f42.png](https://s1.imagehub.cc/images/2023/01/06/31379a32db8f74ccad5630240db68f42.png)
  点击内部的按钮，点击事件以冒泡的方式向外扩散，也会触发外层view的tap事件处理函数
  此时，对于外部的view来说：

  4.1 e.target指向的是触发事件的源头组件，因此，e.target是内部的按钮组件

  4.2 e.currentTarget指向的是当前正在触发事件的那个组件，因此，e.currentTarget是当前的viw组件

5.bindtap的语法格式
  在小程序中，不存在HTML中的onclick鼠标点击事件，而是通过tap事件来响应用户的触摸行为。

  5.1 通过bindtap,可以为组件绑定tap绑定tap触摸事件，语法如下：

![be4062bf7d4eab1869ae49d348b953f6.png](https://s1.imagehub.cc/images/2023/01/06/be4062bf7d4eab1869ae49d348b953f6.png)

  5.2 在页面的.js文件中定义对应的事件处理函数，事件参数通过形参event（一般简写成e）来接收：

![dc7f1b2189d79fdd10b73d170e3be2f5.png](https://s1.imagehub.cc/images/2023/01/06/dc7f1b2189d79fdd10b73d170e3be2f5.png)

6.在事件处理函数中为data中的数据赋值

  通过调用this,setData(dataObject)方法，可以给页面data中的数据重新赋值，事例如下：

![e91c733269070ab0993585ba8cbc124d.png](https://s1.imagehub.cc/images/2023/01/06/e91c733269070ab0993585ba8cbc124d.png)
7.事件传参

  小程序中的事件传参比较特殊，不能在绑定事件的同时为事件处理函数传递参数。例如，下面的代码将不能正常工作：

![82b8828bb36d500c780765cb045b4687.png](https://s1.imagehub.cc/images/2023/01/06/82b8828bb36d500c780765cb045b4687.png)

  因为小程序会把bintap的属性值，统一当作事件名称来处理，相当于要调用一个名称为btnHandle（123）的事件处理函数。
  可以为组件提供data-*自定义属性传参，其中*代表的是参数的名字，示例代码如下：

![bc2ef1b88a054895f08e3de0670f5348.png](https://s1.imagehub.cc/images/2023/01/06/bc2ef1b88a054895f08e3de0670f5348.png)

  最终：

  7.1 info会被解析为参数的名字

  7.2 数值2会被解析为参数的值

  在事件处理函数中，通过event.target.dataset.参数名即可获取到具体参数的值，示例代码如下：

![7b8e9742a553701bd3976e2ee0328d6b.png](https://s1.imagehub.cc/images/2023/01/06/7b8e9742a553701bd3976e2ee0328d6b.png)

8.bindinput的语法格式

  在小程序中，通过input事件来响应文本框的输入事件，语法格式如下：

  8.1 通过bindinut,可以为文本框绑定输入事件：

![48fff778f95762110f685ecf8cadd109.png](https://s1.imagehub.cc/images/2023/01/06/48fff778f95762110f685ecf8cadd109.png)

  8.2 在页面的.js文件中定义事件处理函数：

![b1fa324f5ab8a8f507f39d386bac4815.png](https://s1.imagehub.cc/images/2023/01/06/b1fa324f5ab8a8f507f39d386bac4815.png)

9.实现文本框和data之间的数据同步

  实现步骤：

  1.定义数据

  2.渲染结构

  3.美化样式

  4.绑定input事件处理函数

  定义数据：

![b5ab5f99be8e04a931f7cc7cac436be9.png](https://s1.imagehub.cc/images/2023/01/06/b5ab5f99be8e04a931f7cc7cac436be9.png)

  渲染结构：

![2c70fa06fc312541e468ce771864229f.png](https://s1.imagehub.cc/images/2023/01/06/2c70fa06fc312541e468ce771864229f.png)

  美化样式：

![8317c8ebe7d5a9d53dde316d588b6991.png](https://s1.imagehub.cc/images/2023/01/06/8317c8ebe7d5a9d53dde316d588b6991.png)

  绑定input事件处理函数：

![f1c82155fe99e13ab32cdc06d273db8a.png](https://s1.imagehub.cc/images/2023/01/06/f1c82155fe99e13ab32cdc06d273db8a.png)

      